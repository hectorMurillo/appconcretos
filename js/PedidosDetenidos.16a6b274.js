(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PedidosDetenidos"],{3965:function(e,t,n){"use strict";n("99af"),n("96cf");var r=n("1da1"),a=n("572a"),o=n("bc3a"),i=n.n(o),c={obtenerUltimoDescuentoCliente:function(e,t){return a["a"].get("/pedidos/obtener-descuento-cliente/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return e}))},obtenerPedidos:function(e,t,n){return a["a"].get("/pedidos/obtener-pedidos/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){return e.data})).catch((function(e){return e}))},guardarPedido:function(e){return a["a"].post("/pedidos/guardar",e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},obtenerCierres:function(e){return a["a"].get("/pedidos/obtener-cierres/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))},guardarCierre:function(e,t){return a["a"].get("/pedidos/guardar-cierres/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return e}))},cancelarCierre:function(e,t){return a["a"].get("/pedidos/cancelar-cierres/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return e}))},obtenerPedidosDetenidos:function(e){return a["a"].get("/pedidos/pedidos-detenidos/".concat(e)).then((function(e){return e.data})).catch((function(e){console.log(e)}))},autorizarPedidoDetenido:function(e,t,n){return a["a"].get("/pedidos/autorizar-pedido-detenido/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){return e.data})).catch((function(e){return e}))}},s=i.a.create({baseURL:"https://cors.bridged.cc/https://maps.googleapis.com/maps/api/distancematrix/"});c.obtenerTiempoDistancia=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n,t),console.log("SERVICIO GOOGLE fuera"),e.next=4,s.get().then((function(e){console.log("SERVICIO GOOGLE ",e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.cambiarEstatusPedido=function(e,t,n){return a["a"].get("/pedidos/cambiar-estatus/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){return e.data})).catch((function(e){return e}))},c.cambiarEstatus=function(e,t,n){return a["a"].get("/pedidos/cambiar-status/".concat(e,"/").concat(t,"/").concat(n)).then((function(e){return e.data})).catch((function(e){return e}))},c.reagendarPedido=function(e){return a["a"].post("/pedidos/reagendar-pedido/",e,{headers:{"Content-Type":"application/json"}}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return e}))},t["a"]=c},6293:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("h3",{staticClass:"mb-4"},[n("i",{staticClass:"fas fa-calendar-times"}),e._v(" Pedidos Detenidos")]),n("hr"),e.items.length>0?n("div",[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4"}},[n("b-form-group",{attrs:{label:"Filtrar","label-cols-sm":"1","label-cols-md":"2","label-size":"sm","label-for":"filterInput"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Escribe el filtro...",autocomplete:"off"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[n("i",{staticClass:"fas fa-times"})])],1)],1)],1)],1),n("b-col",{attrs:{md:"3"}},[n("b-form-group",{attrs:{label:"Por página","label-cols-sm":"2","label-cols-md":"2","label-cols-lg":"4","label-size":"sm","label-for":"perPageSelect"}},[n("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1),n("b-table",{attrs:{small:"",stacked:"md","head-variant":"dark",hover:e.hover,striped:e.striped,bordered:e.bordered,items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,filterIncludedFields:e.filterOn,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(estatus)",fn:function(t){return["DA"==t.item.estatus?n("b-badge",{staticClass:"p-2",attrs:{variant:"danger"}},[e._v("Detenido, requiere autorización")]):e._e(),"DC"==t.item.estatus?n("b-badge",{staticClass:"p-2",attrs:{variant:"danger"}},[e._v("Detenido Límite Crédito")]):e._e()]}},{key:"cell(observacion)",fn:function(t){return[""!=t.item.observacion?n("b-badge",{staticClass:"p-2",attrs:{variant:"primary"},on:{click:function(n){return e.VerObservacion(t)}}},[e._v("Ver")]):e._e()]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{title:"Aprobar",size:"sm",variant:"success"},on:{click:function(n){return e.AutorizarPedido(!0,t.item)}}},[n("i",{staticClass:"fa fa-check"})]),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{title:"Rechazar",size:"sm",variant:"danger"},on:{click:function(n){return e.AutorizarPedido(!1,t.item)}}},[n("i",{staticClass:"fa fa-times"})])]}}],null,!1,4181063419)}),n("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"center","aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):n("div",[n("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("No se encontraron registros de "),n("strong",[e._v("clientes detenidos")])])],1)])},a=[],o=(n("4de4"),n("d81d"),n("96cf"),n("1da1")),i=n("3965"),c=n("3d20"),s=n.n(c),u={data:function(){return{items:[],credenciales:{usuario:"",password:""},totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,bordered:!0,hover:!0,striped:!0,sortDirection:"asc",filter:null,filterOn:[],fields:[{key:"folioPedido",label:"Folio Pedido",sortable:!0,sortDirection:"desc"},{key:"cliente",label:"Cliente",sortable:!0,class:"text-center"},{key:"formatoCantidad",label:"Cantidad",sortable:!0,class:"text-center"},{key:"formatoPorcentajeDescuento",label:"Descuento",sortable:!0,class:"text-center"},{key:"fechaSalida",label:"Fecha Salida",sortable:!0,class:"text-center"},{key:"estatus",label:"Estatus",sortable:!0,class:"text-center"},{key:"observacion",label:"Observación",class:"text-center"},{key:"actions",label:"",class:"text-center"}],pedidoAutorizado:!1,observacion:"",pedidoSeleccionado:[]}},components:{},computed:{sortOptions:function(){return this.fields.filter((function(e){return e.sortable})).map((function(e){return{text:e.label,value:e.key}}))}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ObtenerPedidosDetenidos();case 2:return t.next=4,e.CargarRenglones();case 4:case"end":return t.stop()}}),t)})))()},methods:{onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},ObtenerPedidosDetenidos:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.items=[],e.$loading(!0),t.next=4,i["a"].obtenerPedidosDetenidos(0).then((function(t){e.$loading(!1),t.value&&(e.items=t.data)})).catch((function(t){e.$loading(!1),console.log(t)}));case 4:case"end":return t.stop()}}),t)})))()},CargarRenglones:function(){var e=this;setTimeout((function(){e.totalRows=e.items.length}),1e3)},AutorizarPedido:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.pedidoAutorizado=e,n.pedidoSeleccionado=t,a=e?"ACEPTAR":"CANCELAR",r.next=5,s.a.fire({text:"¿Desea "+a+" el pedido del cliente: "+t.cliente+"?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"});case 5:if(o=r.sent,!o.value){r.next=9;break}return r.next=9,n.CapturarObservacion();case 9:case"end":return r.stop()}}),r)})))()},CapturarObservacion:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.fire({title:"Ingrese una observación:",html:'<textarea id="swal-input2" class="swal2-input" placeholder="Capture una observación" style="margin-top: 20px; margin-bottom: 20px; height: 120px;">',focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",preConfirm:function(){n=s.a.getPopup().querySelector("#swal-input2").value;var e=s.a.getPopup().querySelector("#swal-input2");e.style.borderColor="",""===n&&(e.style.borderColor="red",s.a.showValidationMessage("Favor de ingresar una observación."))}});case 2:if(r=t.sent,a=r.value,!a){t.next=8;break}return e.observacion=n,t.next=8,e.AutorizarPedidoDetenido();case 8:case"end":return t.stop()}}),t)})))()},AutorizarPedidoDetenido:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.pedidoAutorizado?"ACEPTO":"CANCELO",e.$loading(!0),t.next=4,i["a"].autorizarPedidoDetenido(e.pedidoSeleccionado.folioPedido,e.pedidoAutorizado,e.observacion).then((function(t){t.value&&(s.a.fire("","Se "+n+" el pedido detenido correctamente","success"),e.ObtenerPedidosDetenidos())})).catch((function(t){console.log(t),e.$loading(!1)}));case 4:e.$loading(!1);case 5:case"end":return t.stop()}}),t)})))()},VerObservacion:function(e){this.$swal.fire({text:e.item.observacion,icon:"info"})}}},d=u,l=n("2877"),f=Object(l["a"])(d,r,a,!1,null,null,null);t["default"]=f.exports},8418:function(e,t,n){"use strict";var r=n("c04e"),a=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var i=r(t);i in e?a.f(e,i,o(0,n)):e[i]=n}},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),o=n("e8b5"),i=n("861d"),c=n("7b0b"),s=n("50c4"),u=n("8418"),d=n("65f0"),l=n("1dde"),f=n("b622"),p=n("2d00"),b=f("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",h=p>=51||!a((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),v=l("concat"),C=function(e){if(!i(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},w=!h||!v;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,a,o,i=c(this),l=d(i,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?i:arguments[t],C(o)){if(a=s(o.length),f+a>m)throw TypeError(g);for(n=0;n<a;n++,f++)n in o&&u(l,f,o[n])}else{if(f>=m)throw TypeError(g);u(l,f++,o)}return l.length=f,l}})},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,o=n("1dde"),i=n("ae40"),c=o("map"),s=i("map");r({target:"Array",proto:!0,forced:!c||!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=PedidosDetenidos.16a6b274.js.map