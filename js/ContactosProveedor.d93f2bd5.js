(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ContactosProveedor"],{"0235":function(t,o,e){"use strict";var a=e("dc34"),n=e.n(a);n.a},"0705":function(t,o,e){"use strict";var a=e("572a"),n={DesactivarCuenta:function(t){return a["a"].post("/cuentas/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},NombreBancos:function(){return a["a"].get("/cuentas/nombresbancos").then((function(t){return t.data})).catch((function(t){return t}))},BancoXCuenta:function(t){return a["a"].get("/cuentas/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},Cuenta:function(t){return a["a"].get("/cuentas/cuenta/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},CuentaGuardar:function(t){return a["a"].post("/cuentas/guardar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}};o["a"]=n},"159b":function(t,o,e){var a=e("da84"),n=e("fdbc"),r=e("17c2"),i=e("9112");for(var c in n){var s=a[c],l=s&&s.prototype;if(l&&l.forEach!==r)try{i(l,"forEach",r)}catch(f){l.forEach=r}}},"17c2":function(t,o,e){"use strict";var a=e("b727").forEach,n=e("a640"),r=e("ae40"),i=n("forEach"),c=r("forEach");t.exports=i&&c?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,o,e){"use strict";var a=e("23e7"),n=e("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"78e6":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"container mt-3"},[e("div",{staticClass:"mt-3"},[e("div",{staticClass:"mt-3"},[e("h3",[e("i",{staticClass:"fas fa-user-friends"}),t._v(" Contactos de "+t._s(this.NombreProveedor))])]),e("div",[e("b-row",{staticClass:"my-2"},[e("b-col",{attrs:{md:"4"}},[e("b-form-group",{attrs:{label:"Filtrar","label-cols-sm":"1","label-cols-md":"2","label-size":"sm","label-for":"filterInput"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Escribe el filtro...",autocomplete:"off"},model:{value:t.filter,callback:function(o){t.filter=o},expression:"filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter},on:{click:function(o){t.filter=""}}},[e("i",{staticClass:"fas fa-times"})])],1)],1)],1)],1),e("b-col",{attrs:{md:"3"}},[e("b-form-group",{attrs:{label:"Por página","label-cols-sm":"2","label-cols-md":"2","label-cols-lg":"4","label-size":"sm","label-for":"perPageSelect"}},[e("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(o){t.perPage=o},expression:"perPage"}})],1)],1),e("b-col",{attrs:{md:"3","offset-md":"2"}},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalRegistroContacto",modifiers:{modalRegistroContacto:!0}}],staticClass:"btn btn-sm py-1 mt-1 btn-block",attrs:{variant:"primary"},on:{click:function(o){return t.limpiarDatos()}}},[e("i",{staticClass:"fa fa-plus"}),t._v(" Nuevo ")])],1)],1),e("b-table",{attrs:{small:"",striped:"",bordered:"",stacked:"md","head-variant":"dark",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(estatus)",fn:function(o){return[e("div",{staticStyle:{width:"15px"}},[o.item.cBPrincipal?e("img",{attrs:{id:"imagen",src:"https://img.icons8.com/color/48/000000/verified-badge.png"}}):t._e()])]}},{key:"cell(acciones)",fn:function(o){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modalInfoContacto",modifiers:{modalInfoContacto:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",title:"Ver detalle"},on:{click:function(e){return t.cargarDatosContacto(o.item.idContacto)}}},[e("i",{staticClass:"fa fa-eye"})]),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modalRegistroContacto",modifiers:{modalRegistroContacto:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",title:"Editar"},on:{click:function(e){return t.cargarDatosContacto(o.item.idContacto)}}},[e("i",{staticClass:"fa fa-edit"})]),e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"danger",title:"Desactivar"},on:{click:function(e){return t.desactivar(o.item.idContacto)}}},[e("i",{staticClass:"fa fa-times"})])]}},{key:"cell(contactar)",fn:function(o){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"primary",title:"Llamar"},on:{click:function(e){return t.llamar(o.item)}}},[e("i",{staticClass:"fas fa-phone-alt"})]),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"success",title:"Whatsapp"},on:{click:function(e){return t.enviarWs(o.item)}}},[e("i",{staticClass:"fab fa-whatsapp"})]),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"info",title:"Enviar correo"},on:{click:function(e){return t.enviar(o.item)}}},[e("i",{staticClass:"fas fa-envelope"})])]}}])}),e("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center","aria-controls":"my-table"},model:{value:t.currentPage,callback:function(o){t.currentPage=o},expression:"currentPage"}}),e("b-modal",{attrs:{id:"modalInfoContacto",title:"Detalles de contacto","hide-footer":""}},[e("b-card",{attrs:{"border-variant":"light"}},[e("b-container",[e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Nombre: ")]),e("b-col",{attrs:{md:"7"}},[t._v(t._s(this.form.Nombre))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Teléfono: ")]),e("b-col",{attrs:{md:"7"}},[t._v(" "+t._s(this.form.Telefono)+" ")])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Teléfono Movil: ")]),e("b-col",{attrs:{md:"7"}},[t._v(" "+t._s(this.form.TelefonoMovil)+" ")])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Correo: ")]),e("b-col",{attrs:{md:"7"}},[t._v(" "+t._s(this.form.Correo)+" ")])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Principal: ")]),e("b-col",{attrs:{sm:"7"}},[t.form.Principal?e("i",{staticClass:"fas fa-check-square fa-2x text-primary"}):e("i",{staticClass:"fas fa-window-close fa-2x text-danger"})])],1)],1)],1)],1),e("b-modal",{attrs:{id:"modalRegistroContacto",title:"Registro contacto",centered:""},on:{ok:t.handleOk}},[e("form",{ref:"form",on:{submit:function(o){return o.stopPropagation(),o.preventDefault(),t.guardarContacto(o)}}},[e("label",[e("i",{staticClass:"fas fa-id-card-alt"}),t._v(" Nombre de contacto "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{id:"Nombre",autocomplete:"off"},model:{value:t.form.Nombre,callback:function(o){t.$set(t.form,"Nombre",o)},expression:"form.Nombre"}}),e("label",{staticClass:"mt-3"},[e("i",{staticClass:"fas fa-phone-alt"}),t._v(" Teléfono ")]),e("b-form-input",{attrs:{id:"Nombre",autocomplete:"off",type:"number"},model:{value:t.form.Telefono,callback:function(o){t.$set(t.form,"Telefono",o)},expression:"form.Telefono"}}),e("label",{staticClass:"mt-3"},[e("i",{staticClass:"fas fa-mobile-alt"}),t._v(" Teléfono Móvil ")]),e("b-form-input",{attrs:{id:"Nombre",autocomplete:"off",type:"number"},model:{value:t.form.TelefonoMovil,callback:function(o){t.$set(t.form,"TelefonoMovil",o)},expression:"form.TelefonoMovil"}}),e("label",{staticClass:"mt-3"},[e("i",{staticClass:"far fa-envelope-open"}),t._v(" Correo ")]),e("b-form-input",{attrs:{id:"Nombre",autocomplete:"off"},model:{value:t.form.Correo,callback:function(o){t.$set(t.form,"Correo",o)},expression:"form.Correo"}}),e("b-form-checkbox",{staticClass:"mt-3",model:{value:t.form.Principal,callback:function(o){t.$set(t.form,"Principal",o)},expression:"form.Principal"}},[t._v(" Cuenta Principal ")])],1)])],1)])])},n=[],r=(e("4de4"),e("4160"),e("d81d"),e("159b"),e("96cf"),e("1da1")),i=e("0705"),c=e("d0e6"),s={data:function(){return{rutaNuevo:"proveedores/registro/",NombreProveedor:"",bancos:[{value:null,disabled:!0,text:"seleccione un banco"}],items:[],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],filter:null,filterOn:[],contacto:{IdContacto:0,Nombre:"",Telefono:"",TelefonoMovil:"",Correo:"",Principal:!1},form:{IdContacto:0,Nombre:"",Telefono:"",TelefonoMovil:"",Correo:"",Principal:!1},fields:[{key:"estatus",label:"  "},{key:"nombre",label:"Nombre",sortable:!0,class:"text-center",sortDirection:"desc"},{key:"telefono",label:"Teléfono",sortable:!0,class:"text-center"},{key:"telefonoMovil",label:"Teléfono Móvil",sortable:!0,class:"text-center"},{key:"correo",label:"Correo",sortable:!0,class:"text-center"},{key:"contactar",label:"Contactar",sortable:!1,class:"text-center"},{key:"acciones",label:"Acciones",sortable:!1,class:"text-center"}],permisoEscritura:!0}},components:{},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var e;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e=t.$route.params.id,o.next=3,t.consultarContactos(e);case 3:return o.next=5,t.consultarProveedor(e);case 5:return o.next=7,t.CargarRenglones();case 7:t.cargaBancosNombres();case 8:case"end":return o.stop()}}),o)})))()},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{CargarRenglones:function(){var t=this;setTimeout((function(){t.totalRows=t.items.length,console.log(t.totalRows)}),1e3)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},desactivar:function(t){var o=this,e={idContacto:t,activado:0};this.$swal.fire({title:"¿Desea eliminar el contacto?",text:"se perderan los datos del contacto",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(t){t.value&&c["a"].DesactivarContacto(e).then((function(t){o.$swal.fire({text:t.message,icon:"success",showConfirmButton:!1});var e=o;setTimeout((function(){e.$router.go()}),1e3)}))}))},enviarWs:function(t){t.telefonoMovil?window.open("https://api.whatsapp.com/send?phone=52".concat(t.telefonoMovil),"_blank"):this.$swal.fire({text:"No existe teléfono móvil asociado",icon:"warning"})},llamar:function(t){t.telefono?window.open("tel:+52".concat(t.telefono),"_blank"):t.telefonoMovil?window.open("tel:+52".concat(t.telefonoMovil),"_blank"):this.$swal.fire({text:"No existe telefono asociado",icon:"warning"})},enviar:function(t){t.correo?window.open("mailto:".concat(t.correo)):this.$swal.fire({text:"No existe correo asociado",icon:"warning"})},redirect:function(){var t=this;setTimeout((function(){t.$router.push({path:"".concat(t.rutaNuevo,"0")})}),500)},consultarProveedor:function(t){var o=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.$loading(!0),e.next=3,c["a"].proveedores(t).then((function(t){console.log(t.data.proveedor[0].nombreComercial),o.NombreProveedor=t.data.proveedor[0].nombreComercial,o.$loading(!1)}));case 3:case"end":return e.stop()}}),e)})))()},handleOk:function(t){t.preventDefault(),this.guardarContacto()},guardarContacto:function(){var t=this,o={idContacto:this.form.IdContacto,idProveedor:this.$route.params.id,nombre:this.form.Nombre,telefono:this.form.Telefono,telefonoMovil:this.form.TelefonoMovil,correo:this.form.Correo,cBPrincipal:this.form.Principal};console.log(o),o.telefono||o.telefonoMovil||o.correo?c["a"].ContactoGuardar(o).then((function(o){if(console.log(o),o.value){t.$swal.fire({text:o.message,icon:"success"});var e=t;setTimeout((function(){e.$router.go()}),1e3)}else t.$swal.fire({text:o.message,icon:"warning"})})):this.$swal.fire({text:"por lo menos proporcione un dato para el contacto",icon:"warning"})},limpiarDatos:function(){this.form.IdContacto=0,this.form.Nombre="",this.form.Telefono="",this.form.TelefonoMovil="",this.form.Correo="",this.form.Principal=!1},cargarDatosContacto:function(t){var o=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.$loading(!0),e.next=3,c["a"].Contacto(t).then((function(t){o.CargarRenglones(),console.log(t.data.contacto[0]),o.form.IdContacto=t.data.contacto[0].idContacto,o.form.Nombre=t.data.contacto[0].nombre,o.form.Telefono=t.data.contacto[0].telefono,o.form.TelefonoMovil=t.data.contacto[0].telefonoMovil,o.form.Correo=t.data.contacto[0].correo,o.form.Principal=t.data.contacto[0].cBPrincipal,o.$loading(!1)}));case 3:case"end":return e.stop()}}),e)})))()},consultarContactos:function(t){var o=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.$loading(!0),e.next=3,c["a"].contactos(t).then((function(t){console.log(t),o.items=t.data.contacto,o.$loading(!1)})).catch((function(t){console.log(t),o.$loading(!1)}));case 3:case"end":return e.stop()}}),e)})))()},cargaBancosNombres:function(){var t=this;this.$loading(!0),i["a"].NombreBancos().then((function(o){o.data.bancos.forEach((function(o){t.bancos.push({value:o.idBanco,text:o.nombre}),t.$loading(!1)}))}))}}},l=s,f=(e("0235"),e("2877")),u=Object(f["a"])(l,a,n,!1,null,"f34c36c2",null);o["default"]=u.exports},d0e6:function(t,o,e){"use strict";var a=e("572a"),n={proveedores:function(t){return null==t||void 0==t||0==t?a["a"].get("/proveedores/todos").then((function(t){return t.data})).catch((function(t){return t})):(console.log(t),a["a"].get("/proveedores/".concat(t)).then((function(t){return t.data})).catch((function(t){return t})))},guardarProveedor:function(t){return a["a"].post("/proveedores/guardar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},contactos:function(t){return a["a"].get("/ContactosProv/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},Contacto:function(t){return a["a"].get("/ContactosProv/contacto/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},ContactoGuardar:function(t){return a["a"].post("/ContactosProv/guardar",t,{headers:{"content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){return t}))},DesactivarProveedor:function(t){return a["a"].post("/proveedores/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},DesactivarContacto:function(t){return a["a"].post("/ContactosProv/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}};o["a"]=n},d81d:function(t,o,e){"use strict";var a=e("23e7"),n=e("b727").map,r=e("1dde"),i=e("ae40"),c=r("map"),s=i("map");a({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dc34:function(t,o,e){},fdbc:function(t,o){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=ContactosProveedor.d93f2bd5.js.map