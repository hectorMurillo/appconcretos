(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NotasDeRemision"],{"28bb":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container my-3"},[a("b-modal",{attrs:{id:e.infoModal.id,title:e.infoModal.title,"ok-only":"",codigo:e.infoModal.codigo,"hide-footer":""},on:{hide:e.resetInfoModal}},e._l(e.infoModal.content,(function(t,o){return a("tr",{key:o},[a("th",[e._v(e._s(o))]),a("td",[e._v(e._s(t))])])})),0),a("b-modal",{attrs:{centered:"",size:"md",title:e.textoModalPagos,"header-bg-variant":e.headerBgVariant,"header-text-variant":e.headerTextVariant},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{disabled:e.disabledButtons,variant:"danger"},on:{click:function(t){e.modalPago=!1}}},[e._v(" Cancelar ")]),a("b-button",{staticClass:"float-right mr-2",attrs:{disabled:e.disabledButtons,variant:"primary"},on:{click:function(t){return e.GuardarPago()}}},[e._v(" Aceptar ")])],1)]},proxy:!0}]),model:{value:e.modalPago,callback:function(t){e.modalPago=t},expression:"modalPago"}},[a("b-container",{staticClass:"container",attrs:{fluid:""}},[a("div",{staticClass:"col-12"},[a("strong",[a("label",[e._v("Importe Nota de Remisión:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.notaRemisionSeleccionada.importeFormato,expression:"notaRemisionSeleccionada.importeFormato"}],staticClass:"form-control",attrs:{disabled:""},domProps:{value:e.notaRemisionSeleccionada.importeFormato},on:{input:function(t){t.target.composing||e.$set(e.notaRemisionSeleccionada,"importeFormato",t.target.value)}}})]),a("div",{staticClass:"col-12"},[a("strong",[a("label",[e._v("Total Abonado:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.notaRemisionSeleccionada.abonadoFormato,expression:"notaRemisionSeleccionada.abonadoFormato"}],staticClass:"form-control",attrs:{disabled:""},domProps:{value:e.notaRemisionSeleccionada.abonadoFormato},on:{input:function(t){t.target.composing||e.$set(e.notaRemisionSeleccionada,"abonadoFormato",t.target.value)}}})]),a("div",{staticClass:"col-12"},[a("strong",[a("label",[e._v("Importe a Abonar:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.importeAbonar,expression:"importeAbonar"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.importeAbonar},on:{input:function(t){t.target.composing||(e.importeAbonar=t.target.value)}}})])])],1),e._m(0),a("b-row",[a("div",{staticClass:"form-group col-sm-12 col-md-6 col-lg-5 col-xl-4 mb-1"},[a("label",[e._v("Desde:")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{locale:"es",size:"sm"},model:{value:e.desde,callback:function(t){e.desde=t},expression:"desde"}})],1),a("div",{staticClass:"form-group col-sm-12 col-md-6 col-lg-5 col-xl-4 mb-1"},[a("label",[e._v("Hasta:")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{locale:"es",size:"sm"},model:{value:e.hasta,callback:function(t){e.hasta=t},expression:"hasta"}})],1)]),a("b-row",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"col-sm-12 col-md-4 col-lg-2 mb-2"},[a("b-button",{staticClass:"mr-2",attrs:{block:"",variant:"success"},on:{click:e.buscaNotasRemisionCobranza}},[a("i",{staticClass:"fa fa-search"}),e._v(" Buscar ")])],1)]),a("b-row",{staticClass:"my-2"},[a("b-col",{attrs:{md:"4"}},[a("b-form-group",{attrs:{label:"Filtrar","label-cols-sm":"1","label-cols-md":"2","label-size":"sm","label-for":"filterInput"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Escribe el filtro...",autocomplete:"off"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[a("i",{staticClass:"fas fa-times"})])],1)],1)],1)],1),a("b-col",{attrs:{md:"3"}},[a("b-form-group",{attrs:{label:"Por página","label-cols-sm":"2","label-cols-md":"2","label-cols-lg":"4","label-size":"sm","label-for":"perPageSelect"}},[a("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1),a("b-table",{attrs:{small:"",stacked:"md","head-variant":"dark",hover:e.hover,striped:e.striped,bordered:e.bordered,items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,filterIncludedFields:e.filterOn,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(estatus)",fn:function(t){return["P"===t.item.estatus?a("b-badge",{staticClass:"p-2",attrs:{variant:"secondary"}},[e._v(" Pendiente ")]):e._e(),"C"===t.item.estatus?a("b-badge",{staticClass:"p-2",attrs:{variant:"danger"}},[e._v(" Cancelada ")]):e._e(),"S"===t.item.estatus?a("b-badge",{staticClass:"p-2",attrs:{variant:"primary"}},[e._v(" Surtiendo ")]):e._e(),"T"===t.item.estatus?a("b-badge",{staticClass:"p-2",attrs:{variant:"success"}},[e._v(" Terminada ")]):e._e()]}},{key:"cell(estatusPago)",fn:function(t){return["P"===t.item.estatusPago?a("b-badge",{staticClass:"p-2",attrs:{variant:"secondary"}},[e._v(" Pendiente ")]):e._e(),"A"===t.item.estatusPago?a("b-badge",{staticClass:"p-2",attrs:{variant:"primary"}},[e._v(" Abonada ")]):e._e(),"T"===t.item.estatusPago?a("b-badge",{staticClass:"p-2",attrs:{variant:"success"}},[e._v(" Pagada ")]):e._e()]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{to:e.rutaDetalle+t.item.folio,size:"sm",title:"Ver Detalle",variant:"outline-info"}},[a("i",{staticClass:"fa fa-eye"})]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{size:"sm",title:"Pagar Nota Remision",variant:"dark"},on:{click:function(a){return e.PagarNotaRemision(t.item)}}},[a("i",{staticClass:"fa fa-money-bill text-success"})])]}}])}),a("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"center","aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-3"},[a("h3",[a("i",{staticClass:"fas fa-clipboard-list"}),e._v(" Notas de Remisión")])])}],r=(a("4de4"),a("d81d"),a("fb6a"),a("96cf"),a("1da1")),i=a("28f5"),s=a("3d20"),c=a.n(s),l={data:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=t.toISOString().slice(0,10),n=a.toISOString().slice(0,10);return{desde:o,hasta:n,items:[],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,bordered:!0,hover:!0,striped:!0,sortDirection:"asc",filter:null,filterOn:[],fields:[{key:"folio",label:"Folio",sortable:!0,class:"text-center"},{key:"fechaFormato",label:"Fecha",sortable:!0,class:"text-center"},{key:"vendedor",label:"Vendedor",sortable:!0,class:"text-center"},{key:"cliente",label:"Cliente",sortable:!0,class:"text-center"},{key:"estatus",label:"Estatus",sortable:!0,class:"text-center"},{key:"estatusPago",label:"Estatus del Pago",sortable:!0,class:"text-center"},{key:"actions",label:"",class:"text-center"}],infoModal:{id:"info-modal",title:"",content:"",codigo:""},idSeleccionado:0,pagoTotalNotaRemision:!1,procederPago:0,modalPago:!1,headerBgVariant:"dark",headerTextVariant:"light",textoModalPagos:"",notaRemisionSeleccionada:{},importeAbonar:0,disabledButtons:!1,rutaDetalle:"/cobranza/notas-de-remision/detalle/"}},components:{},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ObtenerNotasRemision();case 2:return t.next=4,e.CargarRenglones();case 4:case"end":return t.stop()}}),t)})))()},created:function(){},computed:{sortOptions:function(){return this.fields.filter((function(e){return e.sortable})).map((function(e){return{text:e.label,value:e.key}}))}},methods:{onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},buscaNotasRemisionCobranza:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ObtenerNotasRemision();case 2:case"end":return t.stop()}}),t)})))()},ObtenerNotasRemision:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$loading(!0),t.next=3,i["a"].obtenerNotasRemisionCobranza(e.desde,e.hasta).then((function(t){t.value?(e.items=t.data,e.$loading(!1)):e.$loading(!1)})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},CargarRenglones:function(){var e=this;setTimeout((function(){e.totalRows=e.items.length}),1e3)},modal:function(e,t,a){var o="";this.idSeleccionado=e.codigo,this.infoModal.title="Datos de la Nota de Remisión #".concat(e.folio),o+="{ ",o+='"Folio" : " : '.concat(e.folio,'\\n\\n", '),o+='"Cliente" : " : '.concat(e.cliente,'\\n\\n",'),o+='"Fecha" : " : '.concat(e.fechaFormato,'\\n\\n",'),o+='"Obra" : " : '.concat(e.obra,'\\n\\n",'),o+='"Vendedor" : " : '.concat(e.vendedor,'\\n\\n",'),o+='"Equipo" : " : '.concat(e.equipo,'\\n\\n",'),o+='"Operador" : " : '.concat(e.operador,'\\n\\n",'),o+='"nomenclatura" : " : '.concat(e.producto,'\\n\\n",'),o+='"producto" : " : '.concat(e.productoDescripcion,'\\n\\n",'),o+='"Cantidad" : " : '.concat(e.cantidad,' m³\\n\\n",'),o+='"Usuario" : " : '.concat(e.nombreUsuario,'\\n\\n"'),o+="}",o=JSON.parse(o),this.infoModal.content=o,this.$root.$emit("bv::show::modal",this.infoModal.id,a)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},PagarNotaRemision:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.disabledButtons=!1,a.next=3,t.PreguntarTipoPago();case 3:return a.next=5,t.ProcederPago(e);case 5:case"end":return a.stop()}}),a)})))()},PreguntarTipoPago:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.procederPago=0,e.importeAbonar=0,t.next=4,c.a.fire({title:"PAGAR NOTA REMISIÓN",text:"¿Que forma de pago deseas?",icon:"question",showCancelButton:!0,confirmButtonColor:"#008000",cancelButtonColor:"#3085d6",confirmButtonText:"Totalidad",cancelButtonText:"Abono",reverseButtons:!1}).then((function(t){t.isConfirmed?(e.pagoTotalNotaRemision=!0,e.procederPago=1):t.dismiss===c.a.DismissReason.cancel&&(e.pagoTotalNotaRemision=!1,e.procederPago=1)}));case 4:case"end":return t.stop()}}),t)})))()},ProcederPago:function(e){this.procederPago&&(this.notaRemisionSeleccionada=e,console.log(this.notaRemisionSeleccionada),this.pagoTotalNotaRemision&&(this.importeAbonar=this.notaRemisionSeleccionada.diferencia),this.textoModalPagos="Abono a Nota de Remisión #"+e.folio,this.modalPago=!0)},GuardarPago:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.procederPago=!0,t.next=3,e.ValidarPago();case 3:case"end":return t.stop()}}),t)})))()},ValidarPago:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("IMPORTE A ABONAR: ",e.importeAbonar),!e.procederPago){t.next=19;break}if(!(e.importeAbonar>e.notaRemisionSeleccionada.diferencia)){t.next=9;break}return e.procederPago=!1,t.next=6,c.a.fire({title:"¡ALERTA!",text:"El importe a abonar es mayor que el importe necesario para realizar el pago completo.",icon:"warning"});case 6:e.importeAbonar=0,t.next=19;break;case 9:if(!(e.importeAbonar<=0)){t.next=16;break}return e.procederPago=!1,t.next=13,c.a.fire({title:"¡ALERTA!",text:"El importe a abonar debe de ser mayor a 0.",icon:"warning"});case 13:e.importeAbonar=0,t.next=19;break;case 16:return e.disabledButtons=!0,t.next=19,i["a"].guardarPago(e.notaRemisionSeleccionada.idNotasRemisionEnc,e.importeAbonar).then((function(t){t.value?(c.a.fire({title:"EXITO!",text:t.message,icon:"success"}),e.RestablecerDatos()):(e.disabledButtons=!0,c.a.fire({title:"¡ALERTA!",text:t.message,icon:"warning"}))})).catch((function(e){console.log(e)}));case 19:case"end":return t.stop()}}),t)})))()},RestablecerDatos:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ObtenerNotasRemision();case 2:e.modalPago=!1,e.disabledButtons=!1,e.importeAbonar=0;case 5:case"end":return t.stop()}}),t)})))()}}},u=l,d=a("2877"),m=Object(d["a"])(u,o,n,!1,null,"15e52c45",null);t["default"]=m.exports},"28f5":function(e,t,a){"use strict";a("99af");var o=a("572a"),n={obtenerNotasRemision:function(){return o["a"].get("/cobranza/obtenerNotasRemision").then((function(e){return console.log(e),e.data})).catch((function(e){return e}))},ObtenerDatosReporte:function(e){return o["a"].get("/cobranza/obtenerNotasRemision/".concat(e)).then((function(e){return console.log(e),e.data})).catch((function(e){return e}))},obtenerNotasRemisionSurtiendo:function(){return o["a"].get("/cobranza/obtener-notas-surtiendo").then((function(e){return console.log(e),e.data})).catch((function(e){return e}))},obtenerNotasRemisionEntradasSalidas:function(e){return o["a"].get("/cobranza/obtener-notas-remision/".concat(e)).then((function(e){return console.log(e),e.data})).catch((function(e){return e}))},obtenerNotasRemisionCobranza:function(e,t){return o["a"].get("/cobranza/obtener-notas-remision-cobranza/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return e}))},guardarPago:function(e,t){return o["a"].post("/cobranza/notas-remision-guardar-pago/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch((function(e){return e}))},obtenerNotaRemisionCobranza:function(e){return o["a"].get("/cobranza/obtener-nota-remision-cobranza/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))},obtenerDetalleAbonos:function(e){return o["a"].get("/cobranza/obtener-detalle-abonos-nota-remision-cobranza/".concat(e)).then((function(e){return e.data})).catch((function(e){return e}))}};t["a"]=n},8418:function(e,t,a){"use strict";var o=a("c04e"),n=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var i=o(t);i in e?n.f(e,i,r(0,a)):e[i]=a}},"99af":function(e,t,a){"use strict";var o=a("23e7"),n=a("d039"),r=a("e8b5"),i=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),b=m("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",v=f>=51||!n((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),h=d("concat"),R=function(e){if(!i(e))return!1;var t=e[b];return void 0!==t?!!t:r(e)},P=!v||!h;o({target:"Array",proto:!0,forced:P},{concat:function(e){var t,a,o,n,r,i=s(this),d=u(i,0),m=0;for(t=-1,o=arguments.length;t<o;t++)if(r=-1===t?i:arguments[t],R(r)){if(n=c(r.length),m+n>p)throw TypeError(g);for(a=0;a<n;a++,m++)a in r&&l(d,m,r[a])}else{if(m>=p)throw TypeError(g);l(d,m++,r)}return d.length=m,d}})},d81d:function(e,t,a){"use strict";var o=a("23e7"),n=a("b727").map,r=a("1dde"),i=a("ae40"),s=r("map"),c=i("map");o({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(e,t,a){"use strict";var o=a("23e7"),n=a("861d"),r=a("e8b5"),i=a("23cb"),s=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("b622"),d=a("1dde"),m=a("ae40"),f=d("slice"),b=m("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),g=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!f||!b},{slice:function(e,t){var a,o,u,d=c(this),m=s(d.length),f=i(e,m),b=i(void 0===t?m:t,m);if(r(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?n(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(d,f,b);for(o=new(void 0===a?Array:a)(v(b-f,0)),u=0;f<b;f++,u++)f in d&&l(o,u,d[f]);return o.length=u,o}})}}]);
//# sourceMappingURL=NotasDeRemision.ea4e4aa1.js.map