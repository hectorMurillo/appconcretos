(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NoticiasHistorial"],{"8e81":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3"},[a("b-modal",{attrs:{centered:"",size:"md",title:"Noticias","header-bg-variant":t.headerBgVariant,"header-text-variant":t.headerTextVariant},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:function(e){t.modalShow=!1}}},[t._v(" Cancelar ")]),a("b-button",{staticClass:"float-right mr-2",attrs:{variant:"primary"},on:{click:t.GuardarNoticia}},[t._v(" Aceptar ")])],1)]},proxy:!0}]),model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("b-container",{staticClass:"container",attrs:{fluid:""}},[a("div",{staticClass:"col-12"},[a("strong",[a("label",[t._v("Titulo")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.noticia.titulo,expression:"noticia.titulo"},{name:"selectonfocus",rawName:"v-selectonfocus"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.noticia.titulo},on:{input:function(e){e.target.composing||t.$set(t.noticia,"titulo",e.target.value)}}})]),a("div",{staticClass:"col-12"},[a("strong",[a("label",[t._v("Descripción")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noticia.descripcion,expression:"noticia.descripcion"}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:t.noticia.descripcion},on:{input:function(e){e.target.composing||t.$set(t.noticia,"descripcion",e.target.value)}}})]),a("div",{staticClass:"form-group col-12"},[a("label",{staticClass:"control-label"},[t._v("Seleccione una imagen")]),a("input",{ref:"file",staticClass:"form-control-file",attrs:{type:"file",accept:".jpg,.jpeg,.png, .webp"}})])])],1),a("b-modal",{attrs:{centered:"",size:"md",title:"Vista Previa","header-bg-variant":t.headerBgVariant,"header-text-variant":t.headerTextVariant},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"float-right mr-2",attrs:{variant:"primary"},on:{click:function(e){t.modalPreview=!1}}},[t._v("Aceptar ")])],1)]},proxy:!0}]),model:{value:t.modalPreview,callback:function(e){t.modalPreview=e},expression:"modalPreview"}},[a("b-container",{staticClass:"container",attrs:{fluid:""}},[[a("img",{staticClass:"d-block img-fluid w-100",attrs:{width:"200",height:"200",src:"data:image/jpeg;base64,"+t.noticia.imagen,alt:"image slot"}})]],2)],1),t._m(0),a("b-row",{staticClass:"my-2"},[a("b-col",{staticClass:" text-center col-md-9"}),a("b-col",{staticClass:" text-center col-md-3"},[a("b-button",{staticClass:"btn btn-sm py-1 mt-1 btn-block",attrs:{variant:"primary"},on:{click:function(e){return t.NuevaNoticia()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Nuevo ")])],1)],1),a("b-table",{attrs:{small:"",stacked:"md","head-variant":"dark",hover:t.hover,striped:t.striped,bordered:t.bordered,items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,fixed:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(acciones)",fn:function(e){return[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(a){return t.vistaPrevia(e.item.idNoticias)}}},[a("i",{staticClass:"fas fa-newspaper"}),t._v(" Vista Previa")]),a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"info"},on:{click:function(a){return t.editarNoticia(e.item)}}},[a("i",{staticClass:"fas fa-edit"}),t._v(" Editar")]),e.item.activado?a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return t.desactivar(e.item.idNoticias)}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" Mostrando")]):a("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.activar(e.item.idNoticias)}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" Sin mostrar")])]}}])}),a("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center","aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3"},[a("h3",[a("i",{staticClass:"fas fa-newspaper"}),t._v(" Noticias")]),a("hr")])}],r=(a("4de4"),a("c975"),a("d81d"),a("d3b7"),a("96cf"),a("1da1")),o=a("e042"),c={data:function(){return{items:[],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,bordered:!0,hover:!0,striped:!0,sortDirection:"asc",filter:null,filterOn:[],fields:[{key:"titulo",label:"Titulo",sortable:!0,sortDirection:"desc"},{key:"descripcion",label:"Descripción",sortable:!0,sortDirection:"desc"},{key:"acciones",label:"",sortable:!0,sortDirection:"desc"}],modalShow:!1,headerBgVariant:"dark",headerTextVariant:"light",noticia:{idNoticias:0,titulo:"",descripcion:"",imagen:""},modalPreview:!1}},components:{},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ObtenerNoticias();case 2:return e.next=4,t.CargarRenglones();case 4:case"end":return e.stop()}}),e)})))()},created:function(){},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},ObtenerNoticias:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading(!0),e.next=3,o["a"].obtenerNoticias().then((function(e){console.log("R",e),t.items=e.data,t.$loading(!1)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},CargarRenglones:function(){this.totalRows=this.items.length},NuevaNoticia:function(){this.noticia={idNoticias:0,titulo:"",descripcion:"",imagen:""},this.modalShow=!0},GuardarNoticia:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=["image/jpeg","image/png"],i=t.$refs.file.files[0],i&&-1!=a.indexOf(t.$refs.file.files[0].type)){e.next=7;break}if(0!=t.noticia.idNoticias){e.next=7;break}return e.next=6,t.$swal.fire({title:"ATENCIÓN",text:"Debe de seleccionar una imagen para poder guardar la noticia.",icon:"warning"});case 6:return e.abrupt("return");case 7:return t.$loading(!0),e.next=10,t.$swal.fire({title:"ATENCIÓN",text:"¿Desea agregar una nueva noticia?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"Cancelar"}).then((function(e){if(e.value){var a=new FormData;a.append("titulo",t.noticia.titulo),a.append("descripcion",t.noticia.descripcion),a.append("idNoticias",t.noticia.idNoticias),a.append("file",i),o["a"].guardarNoticia(a).then((function(e){console.log(e),t.modalShow=!1,t.$swal.fire({title:"¡ATENCIÓN!",text:"Se guardo correctamente la noticia.",icon:"success"}),t.ObtenerNoticias(),t.noticia={titulo:"",descripcion:"",imagen:""}})).catch((function(e){t.$loading(!1),console.error(e)})).finally((function(){t.$loading(!1)}))}}));case 10:return e.next=12,t.ObtenerNoticias();case 12:return e.next=14,t.CargarRenglones();case 14:case"end":return e.stop()}}),e)})))()},desactivar:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={idNoticias:t,activado:0},a.next=3,o["a"].desactivarNoticia(i).then((function(t){e.ObtenerNoticias(),e.CargarRenglones(),console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()},activar:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={idNoticias:t,activado:1},a.next=3,o["a"].desactivarNoticia(i).then((function(t){e.ObtenerNoticias(),e.CargarRenglones(),console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()},vistaPrevia:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loading(!0),a.next=3,o["a"].obtenerImagen(t).then((function(t){console.log(t.data.noticia[0].imagen),e.noticia.imagen=t.data.noticia[0].imagen,e.modalPreview=!0}));case 3:e.$loading(!1);case 4:case"end":return a.stop()}}),a)})))()},editarNoticia:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.noticia={idNoticias:t.idNoticias,titulo:t.titulo,descripcion:t.descripcion,imagen:""},console.log(e.noticia),e.modalShow=!0,a.next=5,e.ObtenerNoticias();case 5:return a.next=7,e.CargarRenglones();case 7:case"end":return a.stop()}}),a)})))()}}},s=c,l=a("2877"),u=Object(l["a"])(s,i,n,!1,null,"1ed70026",null);e["default"]=u.exports},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,r=a("1dde"),o=a("ae40"),c=r("map"),s=o("map");i({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e042:function(t,e,a){"use strict";var i=a("572a"),n={obtenerNoticias:function(){return i["a"].get("/noticias/todas").then((function(t){return t.data})).catch((function(t){return t}))},obtenerImagen:function(t){return i["a"].get("/noticias/noticia/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},desactivarNoticia:function(t){return i["a"].post("/noticias/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},guardarNoticia:function(t){return i["a"].post("/noticias/registrarNoticia/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}};e["a"]=n}}]);
//# sourceMappingURL=NoticiasHistorial.c23a61c9.js.map