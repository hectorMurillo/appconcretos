(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CuentasProveedor"],{"0705":function(t,e,a){"use strict";var n=a("572a"),r={DesactivarCuenta:function(t){return n["a"].post("/cuentas/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},NombreBancos:function(){return n["a"].get("/cuentas/nombresbancos").then((function(t){return t.data})).catch((function(t){return t}))},BancoXCuenta:function(t){return n["a"].get("/cuentas/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},Cuenta:function(t){return n["a"].get("/cuentas/cuenta/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},CuentaGuardar:function(t){return n["a"].post("/cuentas/guardar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}};e["a"]=r},"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),o=a("17c2"),i=a("9112");for(var s in r){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==o)try{i(u,"forEach",o)}catch(l){u.forEach=o}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),o=a("ae40"),i=r("forEach"),s=o("forEach");t.exports=i&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"2afe":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3"},[a("div",{staticClass:"mt-3"},[a("div",{staticClass:"mt-3"},[a("h3",[a("i",{staticClass:"fas fa-credit-card"}),t._v(" Cuentas de "+t._s(this.NombreProveedor))])]),a("div",[a("b-row",{staticClass:"my-2"},[a("b-col",{attrs:{md:"4"}},[a("b-form-group",{attrs:{label:"Filtrar","label-cols-sm":"1","label-cols-md":"2","label-size":"sm","label-for":"filterInput"}},[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Escribe el filtro...",autocomplete:"off"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[a("i",{staticClass:"fas fa-times"})])],1)],1)],1)],1),a("b-col",{attrs:{md:"3"}},[a("b-form-group",{attrs:{label:"Por página","label-cols-sm":"2","label-cols-md":"2","label-cols-lg":"4","label-size":"sm","label-for":"perPageSelect"}},[a("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),a("b-col",{attrs:{md:"3","offset-md":"2"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalRegistroCuenta",modifiers:{modalRegistroCuenta:!0}}],staticClass:"btn btn-sm py-1 mt-1 btn-block",attrs:{variant:"primary"},on:{click:function(e){return t.limpiarDatos()}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Nueva ")])],1)],1),a("b-table",{attrs:{small:"",striped:"",bordered:"",stacked:"md","head-variant":"dark",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(estatus)",fn:function(e){return[a("div",{staticStyle:{width:"5px"}},[e.item.cBPrincipal?a("img",{attrs:{id:"imagen",src:"https://img.icons8.com/color/48/000000/verified-badge.png"}}):t._e()])]}},{key:"cell(acciones)",fn:function(e){return[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modalInfoCuenta",modifiers:{modalInfoCuenta:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",title:"Ver detalle"},on:{click:function(a){return t.cargarDatosCuenta(e.item.idCuenta)}}},[a("i",{staticClass:"fa fa-eye"})]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modalRegistroCuenta",modifiers:{modalRegistroCuenta:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"outline-info",title:"Editar"},on:{click:function(a){return t.cargarDatosCuenta(e.item.idCuenta)}}},[a("i",{staticClass:"fa fa-edit"})]),a("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"danger",title:"Desactivar"},on:{click:function(a){return t.desactivar(e.item.idCuenta)}}},[a("i",{staticClass:"fa fa-times"})])]}}])}),a("b-pagination",{staticClass:"mt-1",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center","aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("b-modal",{attrs:{id:"modalInfoCuenta",title:"Detalles de cuenta","hide-footer":""}},[a("b-card",{attrs:{"border-variant":"light"}},[a("b-container",[a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"font-weight-bold",attrs:{md:"5"}},[t._v(" Nombre: ")]),a("b-col",{attrs:{md:"7"}},[t._v(t._s(this.form.Nombre))])],1),a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"font-weight-bold",attrs:{sm:"5"}},[t._v(" Número de Cuenta: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(this.form.NumeroCuenta)+" ")])],1),a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"font-weight-bold",attrs:{sm:"5"}},[t._v(" CLABE: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(this.form.CLABE)+" ")])],1),a("b-row",{staticClass:"mb-2"},[a("b-col",{staticClass:"font-weight-bold",attrs:{sm:"5"}},[t._v(" Principal: ")]),a("b-col",{attrs:{sm:"7"}},[t.form.Principal?a("i",{staticClass:"fas fa-check-square fa-2x text-primary"}):a("i",{staticClass:"fas fa-window-close fa-2x text-danger"})])],1)],1)],1)],1),a("b-modal",{attrs:{id:"modalRegistroCuenta",title:"Registro cuenta",centered:""},on:{ok:t.handleOk}},[a("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.guardarCuenta(e)}}},[a("label",[a("i",{staticClass:"fas fa-landmark"}),t._v(" Banco ")]),a("b-form-select",{attrs:{id:"cboBanco",options:t.bancos},model:{value:t.form.Nombre,callback:function(e){t.$set(t.form,"Nombre",e)},expression:"form.Nombre"}}),a("label",{staticClass:"mt-3"},[a("i",{staticClass:"far fa-credit-card"}),t._v(" Número de cuenta ")]),a("b-form-input",{attrs:{id:"NumeroCuenta",autocomplete:"off"},model:{value:t.form.NumeroCuenta,callback:function(e){t.$set(t.form,"NumeroCuenta",e)},expression:"form.NumeroCuenta"}}),a("label",{staticClass:"mt-3"},[a("i",{staticClass:"fas fa-credit-card"}),t._v(" CLABE ")]),a("b-form-input",{attrs:{id:"CLABE",autocomplete:"off"},model:{value:t.form.CLABE,callback:function(e){t.$set(t.form,"CLABE",e)},expression:"form.CLABE"}}),a("b-form-checkbox",{staticClass:"mt-3",model:{value:t.form.Principal,callback:function(e){t.$set(t.form,"Principal",e)},expression:"form.Principal"}},[t._v(" Cuenta Principal ")])],1)])],1)])])},r=[],o=(a("4de4"),a("4160"),a("d81d"),a("159b"),a("96cf"),a("1da1")),i=a("0705"),s=a("d0e6"),c={data:function(){return{rutaNuevo:"proveedores/registro/",NombreProveedor:"",bancos:[{value:null,disabled:!0,text:"seleccione un banco"}],items:[],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],filter:null,filterOn:[],form:{IdCuenta:0,Nombre:"",NumeroCuenta:"",CLABE:"",Principal:!1},fields:[{key:"estatus",label:"  "},{key:"nombre",label:"Banco",sortable:!0,sortDirection:"desc"},{key:"numeroCuenta",label:"NumeroCuenta",sortable:!0,class:"text-center"},{key:"acciones",label:"Acciones",sortable:!1,class:"text-center"}],permisoEscritura:!0}},components:{},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.consultarCuentas(a);case 3:return e.next=5,t.consultarProveedor(a);case 5:return e.next=7,t.CargarRenglones();case 7:t.cargaBancosNombres();case 8:case"end":return e.stop()}}),e)})))()},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},methods:{CargarRenglones:function(){var t=this;setTimeout((function(){t.totalRows=t.items.length,console.log(t.totalRows)}),1e3)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},desactivar:function(t){var e=this,a={idCuenta:t,activado:0};this.$swal.fire({title:"¿Desdea eliminar la cuenta?",text:"se perderan los datos de la cuenta",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",cancelButtonText:"No"}).then((function(t){t.value&&i["a"].DesactivarCuenta(a).then((function(t){e.$swal.fire({text:t.message,icon:"success"});var a=e;setTimeout((function(){a.$router.go()}),1e3)}))}))},redirect:function(){var t=this;setTimeout((function(){t.$router.push({path:"".concat(t.rutaNuevo,"0")})}),500)},consultarProveedor:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loading(!0),a.next=3,s["a"].proveedores(t).then((function(t){console.log(t.data.proveedor[0].nombreComercial),e.NombreProveedor=t.data.proveedor[0].nombreComercial,e.$loading(!1)}));case 3:case"end":return a.stop()}}),a)})))()},handleOk:function(t){t.preventDefault(),this.guardarCuenta()},guardarCuenta:function(){var t=this,e={idCuenta:this.form.IdCuenta,idProveedor:this.$route.params.id,idBanco:this.form.Nombre,numeroCuenta:this.form.NumeroCuenta,clabe:this.form.CLABE,cBPrincipal:this.form.Principal};console.log(e),i["a"].CuentaGuardar(e).then((function(e){if(console.log(e),e.value){t.$swal.fire({text:e.message,icon:"success"});var a=t;setTimeout((function(){a.$router.go()}),1e3)}else t.$swal.fire({text:e.message,icon:"warning"})}))},limpiarDatos:function(){this.form.IdCuenta=0,this.form.Nombre="",this.form.NumeroCuenta="",this.form.CLABE="",this.form.Principal=!1},cargarDatosCuenta:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loading(!0),a.next=3,i["a"].Cuenta(t).then((function(t){e.CargarRenglones(),console.log(t),e.form.IdCuenta=t.data.cuenta[0].idCuenta,e.form.Nombre=t.data.cuenta[0].idBanco,e.form.NumeroCuenta=t.data.cuenta[0].numeroCuenta,e.form.CLABE=t.data.cuenta[0].cLABE,e.form.Principal=t.data.cuenta[0].cBPrincipal,e.$loading(!1)}));case 3:case"end":return a.stop()}}),a)})))()},consultarCuentas:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loading(!0),a.next=3,i["a"].BancoXCuenta(t).then((function(t){console.log(t),e.items=t.data.cuenta,e.$loading(!1)})).catch((function(t){console.log(t),e.$loading(!1)}));case 3:case"end":return a.stop()}}),a)})))()},cargaBancosNombres:function(){var t=this;this.$loading(!0),i["a"].NombreBancos().then((function(e){e.data.bancos.forEach((function(e){t.bancos.push({value:e.idBanco,text:e.nombre}),t.$loading(!1)}))}))}}},u=c,l=(a("cd92"),a("2877")),f=Object(l["a"])(u,n,r,!1,null,"debcc6d8",null);e["default"]=f.exports},4160:function(t,e,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"7eee":function(t,e,a){},cd92:function(t,e,a){"use strict";var n=a("7eee"),r=a.n(n);r.a},d0e6:function(t,e,a){"use strict";var n=a("572a"),r={proveedores:function(t){return null==t||void 0==t||0==t?n["a"].get("/proveedores/todos").then((function(t){return t.data})).catch((function(t){return t})):(console.log(t),n["a"].get("/proveedores/".concat(t)).then((function(t){return t.data})).catch((function(t){return t})))},guardarProveedor:function(t){return n["a"].post("/proveedores/guardar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},contactos:function(t){return n["a"].get("/ContactosProv/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},Contacto:function(t){return n["a"].get("/ContactosProv/contacto/".concat(t)).then((function(t){return t.data})).catch((function(t){return t}))},ContactoGuardar:function(t){return n["a"].post("/ContactosProv/guardar",t,{headers:{"content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){return t}))},DesactivarProveedor:function(t){return n["a"].post("/proveedores/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))},DesactivarContacto:function(t){return n["a"].post("/ContactosProv/desactivar",t,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data})).catch((function(t){console.log(t)}))}};e["a"]=r},d81d:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").map,o=a("1dde"),i=a("ae40"),s=o("map"),c=i("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=CuentasProveedor.341fc3d4.js.map