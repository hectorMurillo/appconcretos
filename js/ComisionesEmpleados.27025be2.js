(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ComisionesEmpleados"],{8418:function(t,e,o){"use strict";var a=o("c04e"),n=o("9bf2"),s=o("5c6c");t.exports=function(t,e,o){var i=a(e);i in t?n.f(t,i,s(0,o)):t[i]=o}},"99af":function(t,e,o){"use strict";var a=o("23e7"),n=o("d039"),s=o("e8b5"),i=o("861d"),r=o("7b0b"),c=o("50c4"),l=o("8418"),d=o("65f0"),m=o("1dde"),u=o("b622"),f=o("2d00"),p=u("isConcatSpreadable"),C=9007199254740991,v="Maximum allowed index exceeded",h=f>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=m("concat"),g=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},x=!h||!b;a({target:"Array",proto:!0,forced:x},{concat:function(t){var e,o,a,n,s,i=r(this),m=d(i,0),u=0;for(e=-1,a=arguments.length;e<a;e++)if(s=-1===e?i:arguments[e],g(s)){if(n=c(s.length),u+n>C)throw TypeError(v);for(o=0;o<n;o++,u++)o in s&&l(m,u,s[o])}else{if(u>=C)throw TypeError(v);l(m,u++,s)}return m.length=u,m}})},cfab:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t._m(0),o("div",{staticClass:"row"},[t._m(1),o("div",{staticClass:"col-4 text-center"},[o("datepicker",{attrs:{id:"fecha","input-class":"form-control",format:"dd/MMM/yyyy","calendar-button-icon":"fa fa-calendar",language:t.language,"calendar-button":!0,"bootstrap-styling":!0,"use-utc":!0},model:{value:t.fechaComisionSeleccionada,callback:function(e){t.fechaComisionSeleccionada=e},expression:"fechaComisionSeleccionada"}})],1)]),t.empleados.length>0?o("div",{staticClass:"row mt-3"},[o("div",{staticClass:"col-12"},[o("table",{staticClass:"table table-striped table-sm ",attrs:{id:"tablaClientes"}},[t._m(2),o("tbody",{ref:"tablaClientesBody"},t._l(t.empleados,(function(e,a){return o("tr",{key:a,attrs:{id:"row"+a}},[o("td",{domProps:{textContent:t._s(e.codigo)}}),o("td",{domProps:{textContent:t._s(e.nombreCompleto)}}),o("td",{domProps:{textContent:t._s(e.celular)}}),o("td",{staticClass:"text-center"},[o("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(o){return t.DetalleEmpleadoComison(e)}}},[t._v(" Mostrar ")])])])})),0)])])]):o("div",{staticClass:"mt-3"},[t._m(3)]),[o("div",[o("b-modal",{staticClass:"font-8",attrs:{"hide-footer":"",centered:"",title:t.tituloModal,size:"lg","no-close-on-backdrop":""},model:{value:t.mostrarComisiones,callback:function(e){t.mostrarComisiones=e},expression:"mostrarComisiones"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 mb-3"},[t.montoAsignado?t._e():o("b-form-checkbox",{on:{change:t.AsignaMontoRecomendado}},[t._v(" Asignar monto recomendado ")])],1),t.montoAsignado?o("div",{staticClass:"col-12"},[o("table",{staticClass:"table table-striped table-sm",attrs:{id:"tablaClientes"}},[o("thead",{staticClass:"table-primary"},[o("th",{staticClass:"col-6"},[t._v("Descripcion")]),o("th",{staticClass:"col-3 text-center"},[t._v("Monto")])]),o("tbody",{ref:"tablaClientesBody"},t._l(t.comisionesEmpleado,(function(e,a){return o("tr",{key:a,attrs:{id:"row"+a}},[o("td",{domProps:{textContent:t._s(e.descripcion)}}),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.monto,expression:"item.monto"}],staticClass:"form-control",staticStyle:{"text-align":"right"},attrs:{onkeypress:"return event.charCode >= 48 && event.charCode <= 57",disabled:""},domProps:{value:e.monto},on:{input:function(o){o.target.composing||t.$set(e,"monto",o.target.value)}}})])])})),0)])]):o("div",{staticClass:"col-12"},[o("table",{staticClass:"table table-stripped table-sm",attrs:{id:"tablaClientes"}},[o("thead",[o("th",{staticClass:"col-6"},[t._v("Descripcion")]),o("th",{staticClass:"col-3 text-center"},[t._v("Monto Asignado")]),o("th",{staticClass:"col-3 text-center"},[t._v("Monto Recomendado")])]),o("tbody",{ref:"tablaClientesBody"},t._l(t.comisionesEmpleado,(function(e,a){return o("tr",{key:a,attrs:{id:"row"+a}},[o("td",{domProps:{textContent:t._s(e.descripcion)}}),o("td",[o("input",{directives:[{name:"selectonfocus",rawName:"v-selectonfocus"},{name:"model",rawName:"v-model",value:e.monto,expression:"item.monto"}],staticClass:"form-control",staticStyle:{"text-align":"right"},attrs:{onkeypress:"return event.charCode >= 48 && event.charCode <= 57",disabled:1==t.isDisabled},domProps:{value:e.monto},on:{input:function(o){o.target.composing||t.$set(e,"monto",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"selectonfocus",rawName:"v-selectonfocus"},{name:"model",rawName:"v-model",value:e.cantidadMaximaComision,expression:"item.cantidadMaximaComision"}],staticClass:"form-control",staticStyle:{"text-align":"right"},attrs:{onkeypress:"return event.charCode >= 48 && event.charCode <= 57",disabled:""},domProps:{value:e.cantidadMaximaComision},on:{input:function(o){o.target.composing||t.$set(e,"cantidadMaximaComision",o.target.value)}}})])])})),0)])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 text-right"},[o("button",{staticClass:"btn btn-sm btn-primary col-3",on:{click:t.AceptarComisionEmpleado}},[o("i",{staticClass:"fas fa-save"}),t._v(" "+t._s(t.btnModal)+" ")])])])])])],1)]],2)},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 mb-2"},[o("h3",[t._v("Comisiones de Empleados")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"offset-7 col-1 text-right p-0 mt-2"},[o("label",{staticClass:"font-25",attrs:{for:"fecha"}},[t._v(" Dia: ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",{staticClass:"table-primary"},[o("th",{staticClass:"col-2"},[t._v("Código")]),o("th",{staticClass:"col-5"},[t._v("Nombre")]),o("th",{staticClass:"col-3"},[t._v("Celular")]),o("th",{staticClass:"col-2 text-center"},[t._v("Comisiones")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"alert alert-warning text-center pt-1 pb-0",attrs:{role:"alert"}},[o("h5",[t._v("No hay empleados con comisiones asignados.")])])}],s=(o("99af"),o("4160"),o("159b"),o("96cf"),o("1da1")),i=o("3767"),r=o("fa33"),c=o("2430"),l={data:function(){return{language:c["es"],calendario:!0,btnModal:"Guardar",comisionSeleccionada:!1,fechaComisionSeleccionada:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),mostrarComisiones:!1,montoAsignado:!1,isDisabled:0,tituloModal:"",empleados:[],empleadoSeleccionado:[],comisionesEmpleado:[],comisiones:[],comisionesSeleccionadas:[]}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ObtenerEmpleadosConComision();case 2:case"end":return e.stop()}}),e)})))()},components:{Datepicker:r["a"]},computed:{},watch:{},methods:{AsignaMontoRecomendado:function(){var t=this;this.comisionesEmpleado.forEach((function(e,o){t.comisionesEmpleado[o].monto=e.cantidadMaximaComision}))},ObtenerEmpleadosConComision:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading(!0),e.next=3,i["a"].empleados();case 3:o=e.sent,t.$loading(!1),o.value&&(t.empleados=o.data);case 6:case"end":return e.stop()}}),e)})))()},DetalleEmpleadoComison:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.empleadoSeleccionado=t,e.tituloModal="Comisiones asignadas a ".concat(t.nombreCompleto),e.$loading(!0),o.next=5,i["a"].comisionesPorEmpleado(t.codigo,e.fechaComisionSeleccionada);case 5:a=o.sent,e.$loading(!1),a.value?(console.log(a),a.data.length>0&&(e.btnModal="Modificar",e.comisionesEmpleado=a.data,e.mostrarComisiones=!0,e.montoAsignado=!0)):(e.montoAsignado=!1,e.comisionesEmpleado=a.data,e.mostrarComisiones=!0);case 8:case"end":return o.stop()}}),o)})))()},dateFormat:function(t,e){return Intl.DateTimeFormat("es-MX",e).format(t)},AceptarComisionEmpleado:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.montoAsignado){e.next=7;break}if(o=t.VerificarMonto(),!o){e.next=5;break}return e.next=5,t.guardarComisiones();case 5:e.next=8;break;case 7:console.log("asd");case 8:case"end":return e.stop()}}),e)})))()},guardarComisiones:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$swal.fire({title:"¡ATENCIÓN!",text:"¿Está seguro de guardar el monto de las comisiones? ",showCancelButton:!0,icon:"question",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"});case 2:if(o=e.sent,!o.value){e.next=9;break}return a={comisiones:t.comisionesEmpleado,codEmpleado:t.empleadoSeleccionado.codigo,fechaComision:t.fechaComisionSeleccionada},e.next=7,i["a"].guardarComisiones(a);case 7:n=e.sent,n.value?(t.mostrarComisiones=!1,t.$swal.fire({text:n.message,icon:"info"})):t.$swal.fire({text:n.message,icon:"info"});case 9:case"end":return e.stop()}}),e)})))()},VerificarMonto:function(){for(var t=0;t<this.comisionesEmpleado.length;t++){var e=this.comisionesEmpleado[t].monto,o=this.comisionesEmpleado[t].cantidadMaximaComision;if(e>o)return this.$swal.fire({text:"El monto asignado de $".concat(e," no debe ser mayor a la cantidad de $").concat(o," que se le recomienda"),icon:"info"}),this.comisionesEmpleado[t].monto=0,!1}return!0}}},d=l,m=o("2877"),u=Object(m["a"])(d,a,n,!1,null,"391bfd52",null);e["default"]=u.exports}}]);
//# sourceMappingURL=ComisionesEmpleados.27025be2.js.map