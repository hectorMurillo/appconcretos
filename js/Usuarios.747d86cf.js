(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Usuarios"],{"159b":function(o,a,e){var t=e("da84"),r=e("fdbc"),n=e("17c2"),i=e("9112");for(var s in r){var u=t[s],l=u&&u.prototype;if(l&&l.forEach!==n)try{i(l,"forEach",n)}catch(c){l.forEach=n}}},"17c2":function(o,a,e){"use strict";var t=e("b727").forEach,r=e("a640"),n=e("ae40"),i=r("forEach"),s=n("forEach");o.exports=i&&s?[].forEach:function(o){return t(this,o,arguments.length>1?arguments[1]:void 0)}},4160:function(o,a,e){"use strict";var t=e("23e7"),r=e("17c2");t({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"54d2":function(o,a,e){"use strict";e.r(a);var t=function(){var o=this,a=o.$createElement,e=o._self._c||a;return e("div",[e("div",{staticClass:"container my-5"},[o._m(0),e("b-row",[e("b-col",{attrs:{md:"3","offset-md":"8"}},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-usuario",modifiers:{"modal-usuario":!0}}],staticClass:"btn btn-sm py-1 btn-block",attrs:{variant:"primary"}},[e("i",{staticClass:"fa fa-plus"}),o._v(" Nuevo ")])],1)],1),e("table-sortable",{attrs:{items:o.items,fields:o.fields}}),e("b-modal",{ref:"modal",attrs:{id:"modal-usuario",title:"Registro usuario",centered:""},on:{ok:o.handleOk}},[e("form",{ref:"form",on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),o.guardarUsuario(a)}}},[e("b-form-group",{attrs:{label:"Empleado","label-for":"cboEmpleado","invalid-feedback":"Campo requerido"}},[e("b-form-select",{staticClass:"mt-3",attrs:{id:"cboEmpleado",options:o.empleadosCombo,size:"sm"},on:{change:o.actualizaDatosUsuario},model:{value:o.selectedEmpleado,callback:function(a){o.selectedEmpleado=a},expression:"selectedEmpleado"}})],1),e("b-form-group",{attrs:{label:"Usuario","label-for":"txtUsuario","invalid-feedback":"Campo requerido"}},[e("b-form-input",{attrs:{id:"txtUsuario",required:"",autocomplete:"off"},model:{value:o.usuarioModel.usuario,callback:function(a){o.$set(o.usuarioModel,"usuario",a)},expression:"usuarioModel.usuario"}})],1),e("b-form-group",{attrs:{label:"Contrase침a","label-for":"txtContrasena","invalid-feedback":"Campo requerido"}},[e("b-form-input",{attrs:{id:"txtContrasena",required:"",type:"password",autocomplete:"new-password"},model:{value:o.usuarioModel.contrasena,callback:function(a){o.$set(o.usuarioModel,"contrasena",a)},expression:"usuarioModel.contrasena"}})],1),e("b-form-group",{attrs:{label:"Confirmar contrase침a","label-for":"txtContrasenaConfirmacion","invalid-feedback":"Campo requerido"}},[e("b-form-input",{attrs:{id:"txtContrasenaConfirmar",required:"",type:"password",autocomplete:"new-password"},model:{value:o.usuarioModel.confirmarContrasena,callback:function(a){o.$set(o.usuarioModel,"confirmarContrasena",a)},expression:"usuarioModel.confirmarContrasena"}})],1),o.usuarioModel.confirmarContrasena!=o.usuarioModel.contrasena?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[o._v(" Las contrase침as no coinciden ")]):o._e()],1)])],1)])},r=[function(){var o=this,a=o.$createElement,e=o._self._c||a;return e("div",{staticClass:"my-1"},[e("h3",[e("i",{staticClass:"fas fa-users"}),o._v(" Usuarios")])])}],n=(e("7db0"),e("4160"),e("159b"),e("96cf"),e("1da1")),i=e("7230"),s=e("ef82"),u=e("acec"),l={data:function(){return{empleadosSinUsuario:[],items:[],fields:[{key:"usuario",label:"Usuario",sortable:!0,class:"text-center"},{key:"nombreCompleto",label:"Nombre",sortable:!0,sortDirection:"desc"},{key:"tipoEmpleado",label:"Tipo Empleado",sortable:!0,sortDirection:"desc"},{key:"fechaUltimaConexion",label:"Ultima Conexi칩n",sortable:!0,sortDirection:"desc"},{key:"actionsUsuarios",label:"",sortable:!0,class:"text-center"}],modalInfo:{id:"modal",title:"",content:"",codigo:"",disabled:!1},empleadosCombo:[{value:null,disable:!0,text:"Seleccione un empleado..."}],selectedEmpleado:null,usuarioModel:{usuario:"",contrasena:"",confirmarContrasena:"",codEmpleado:null},confirmaContra:""}},components:{TableSortable:i["a"]},mounted:function(){var o=this;this.cargaEmpleadosNoUsuarios(),this.$loading(!0),s["a"].usuarios().then((function(a){return o.items=a.data,a.data})).catch((function(o){console.log(o)})),u["a"].empleados().then((function(a){a.value&&(o.empleadosSinUsuario=a.data,a.data.forEach((function(a){if(""==a.usuario){var e={value:a.codigo,text:a.nombre+" "+a.apellidoP+" "+a.apellidoM};o.empleadosCombo.push(e)}})))})),this.$loading(!1)},methods:{actualizaDatosUsuario:function(){var o=this;this.usuarioModel.codEmpleado=this.selectedEmpleado,this.usuarioModel.usuario=this.empleadosSinUsuario.find((function(a){return a.codigo==o.selectedEmpleado})).correo},modal:function(){this.modalInfo.title="Registro de usuario",this.$root.$emit("bv::show::modal-usuario")},handleOk:function(o){o.preventDefault(),this.guardarUsuario()},guardarUsuario:function(){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o.$loading(!0),o.$nextTick((function(){o.$bvModal.hide("modal-usuario")})),a.next=4,s["a"].guardarUsuario(o.usuarioModel).then((function(a){if(a.value){o.$swal.fire({text:"El Usuario se ha guardado exitosamente!",icon:"success"});var e=o;setTimeout((function(){e.$router.go()}),1500)}else o.$swal.fire({text:a.message,icon:"warning"})}));case 4:o.$loading(!1);case 5:case"end":return a.stop()}}),a)})))()},cargaEmpleadosNoUsuarios:function(){var o=this;this.$loading(!0),s["a"].empleadosNoUsuario().then((function(a){console.log(a),a.forEach((function(a){console.log(a.codigo),o.empleadosCombo.push({value:a.codigo,text:a.nombre+" "+a.apellidoP+" "+a.apellidoM}),o.$loading(!1)}))}))}}},c=l,d=e("2877"),f=Object(d["a"])(c,t,r,!1,null,"4bbd603d",null);a["default"]=f.exports},"7db0":function(o,a,e){"use strict";var t=e("23e7"),r=e("b727").find,n=e("44d2"),i=e("ae40"),s="find",u=!0,l=i(s);s in[]&&Array(1)[s]((function(){u=!1})),t({target:"Array",proto:!0,forced:u||!l},{find:function(o){return r(this,o,arguments.length>1?arguments[1]:void 0)}}),n(s)},acec:function(o,a,e){"use strict";var t=e("572a"),r={empleados:function(){return t["a"].get("/empleados/todos").then((function(o){return console.log(o.data),o.data})).catch((function(o){return o}))},obtenerPersonalCargaDiesel:function(o){return o=null==o||void 0==o||0==o?0:o,t["a"].get("/empleados/personalCargaDiesel/".concat(o)).then((function(o){return o.data})).catch((function(o){return o}))},tipos:function(){return t["a"].get("/empleados/tipos").then((function(o){return o.data})).catch((function(o){return o}))},tiposUtilizados:function(){return t["a"].get("/empleados/tiposUtilizados").then((function(o){return o.data})).catch((function(o){return o}))},guardarEmpleado:function(o){return t["a"].post("/empleados/guardar",o,{headers:{"Content-Type":"application/json"}}).then((function(o){return o.data})).catch((function(o){console.log(o)}))},subtipo:function(o){return t["a"].post("/empleados/SubTipos",{codTipo:o},{headers:{"Content-Type":"application/json"}}).then((function(o){return console.log("SUBTIPOSSS-> ",o),o.data})).catch((function(o){console.log(o)}))},obtenerEmpleado:function(o){return t["a"].get("/Empleados/".concat(o)).then((function(o){return o.data})).catch((function(o){return o}))},tiposEmpleado:function(o){return o=null==o||void 0==o?0:o,t["a"].get("/empleados/tiposEmpleado/".concat(o)).then((function(o){return o.data})).catch((function(o){return o}))},guardarTipoEmpleado:function(o){return t["a"].post("/empleados/guardar/tipoEmpleado",o,{headers:{"Content-Type":"application/json"}}).then((function(o){return o.data})).catch((function(o){return o}))}};a["a"]=r}}]);
//# sourceMappingURL=Usuarios.747d86cf.js.map